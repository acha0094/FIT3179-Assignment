{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "config": {
        "background": "rgb(253, 239, 223)"
    },
    "data": {"url": "data/vaccination/vax_state_cleaned2.csv"},
    "width": 800,
    "height": 400,
    "encoding": {
        "x": {
            "field": "date", 
            "type": "temporal", 
            "title": ""
        }
    },
    "layer": [
        {
            "data": {"url": "data/vaccination/vax_state_cleaned.csv"},
            "mark": "rule",
            "encoding": {
                "opacity": {
                    "condition": {"value": 0.5, "param": "hover", "empty": false},
                    "value": 0
                },
                "tooltip": [
                    {"field": "date", "type": "temporal", "title": "Date"},
                    {"field": "cumul_partial", "type": "quantitative", "title": "1st Partial Dose"},
                    {"field": "cumul_full", "type": "quantitative", "title": "2nd Full Dose"},
                    {"field": "cumul_booster", "type": "quantitative", "title": "1st Booster Dose"},
                    {"field": "cumul_booster2", "type": "quantitative", "title": "2nd Booster Dose"}
                ]
            },
            "params": [
                {
                    "name": "hover",
                    "select": {
                        "type": "point",
                        "fields": ["date"],
                        "nearest": true,
                        "on": "mouseover",
                        "clear": "mouseout"
                    }
                }
            ]
        },
        {
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "date", 
                    "type": "temporal", 
                    "title": "Date"
                },
                "y": {
                    "field": "value",
                    "type": "quantitative",
                    "title": "Number of Vaccination Doses Administered"
                },
                "color": {
                    "field": "variable",
                    "type": "nominal",
                    "scale": {"range": ["cyan", "black", "orange", "purple"]},
                    "legend": {
                        "title": "Vaccination Dose",
                        "labelExpr": "{'cumul_partial': '1st Partial Dose', 'cumul_full': '2nd Full Dose', 'cumul_booster': '1st Booster Dose', 'cumul_booster2': '2nd Booster Dose'}[datum.label]"
                    }
                }
            }
        }
    ]    
}