{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "config": {
        "background": "rgb(253, 239, 223)"
    },
    "data": {"url": "data/vaccination/vax_state_cleaned2.csv"},
    "width": 800,
    "height": 400,
    "encoding": {
        "x": {
            "field": "date", 
            "type": "temporal", 
            "title": ""
        }
    },
    "layer": [
        {
            "data": {"url": "data/vaccination/vax_state_cleaned.csv"},
            "mark": "rule",
            "encoding": {
                "opacity": {
                    "condition": {"value": 0.5, "param": "hover", "empty": false},
                    "value": 0
                },
                "tooltip": [
                    {"field": "date", "type": "temporal", "title": "Date"},
                    {"field": "cumul_partial", "type": "quantitative", "title": "1st Partial Dose"},
                    {"field": "cumul_full", "type": "quantitative", "title": "2nd Full Dose"},
                    {"field": "cumul_booster", "type": "quantitative", "title": "1st Booster Dose"},
                    {"field": "cumul_booster2", "type": "quantitative", "title": "2nd Booster Dose"}
                ]
            },
            "params": [
                {
                    "name": "hover",
                    "select": {
                        "type": "point",
                        "fields": ["date"],
                        "nearest": true,
                        "on": "mouseover",
                        "clear": "mouseout"
                    }
                }
            ]
        },
        {
            "mark": {
            "type": "text",
            "align": "left",
            "baseline": "middle",
            "dx": -12,
            "font": "sans-serif",
            "fontSize": 12,
            "fontStyle": "italic"
            },
            "encoding": {
                "text": {"value": "2 Weeks Interval Between 1st & 2nd Dose"},
                "color": {"value": "black"},
                "x": {"value": 22},
                "y": {"datum": 18000000, "type": "quantitative"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 278},
                "x2": {"value": 319},
                "y": {"datum": 22000000},
                "y2": {"datum": 22000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 261},
                "x2": {"value": 298},
                "y": {"datum": 20000000},
                "y2": {"datum": 20000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 244},
                "x2": {"value": 282},
                "y": {"datum": 18000000},
                "y2": {"datum": 18000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 230},
                "x2": {"value": 267},
                "y": {"datum": 16000000},
                "y2": {"datum": 16000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 219},
                "x2": {"value": 254},
                "y": {"datum": 14000000},
                "y2": {"datum": 14000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 210},
                "x2": {"value": 246},
                "y": {"datum": 12000000},
                "y2": {"datum": 12000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 201},
                "x2": {"value": 237},
                "y": {"datum": 10000000},
                "y2": {"datum": 10000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 191},
                "x2": {"value": 226},
                "y": {"datum": 8000000},
                "y2": {"datum": 8000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 176},
                "x2": {"value": 214},
                "y": {"datum": 6000000},
                "y2": {"datum": 6000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "rule",
            "encoding": {
                "x": {"value": 159},
                "x2": {"value": 195},
                "y": {"datum": 4000000},
                "y2": {"datum": 4000000},
                "color": {"value": "red"}
            }
        },
        {
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "date", 
                    "type": "temporal", 
                    "title": "Date"
                },
                "y": {
                    "field": "value",
                    "type": "quantitative",
                    "title": "Number of Vaccination Doses Administered"
                },
                "color": {
                    "field": "variable",
                    "type": "nominal",
                    "scale": {"range": ["cyan", "black", "orange", "purple"]},
                    "legend": {
                        "title": "Vaccination Dose",
                        "labelExpr": "{'cumul_partial': '1st Partial Dose', 'cumul_full': '2nd Full Dose', 'cumul_booster': '1st Booster Dose', 'cumul_booster2': '2nd Booster Dose'}[datum.label]"
                    }
                }
            }
        }
    ]    
}